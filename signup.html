<!DOCTYPE HTML>

<html>
    <head>
        <title>Sign Up</title>
        <link href="css/bootstrap/css/bootstrap.min.css" rel="stylesheet">
        <link href="css/fontawesome/css/font-awesome.min.css" rel="stylesheet">
        <link href="css/basicStyle.css" rel="stylesheet">
        <link href='http://fonts.googleapis.com/css?family=Kreon:300,400,700' rel='stylesheet' type='text/css'>
    </head>
    <body style="font-family: 'Kreon'; background-color: #F6E3CE">
        <form name="myForm" id="myForm">
        <table align="center">
            <tr>
                <td><label for="FirstNameLabel" class="tableproperties">First Name</label></td>
                <td><input type="text" name="firstname" placeholder="Enter First Name" id="FirstNameBox" style="height: 30px; border:2px solid black; width: 300px;" required=""></td>
            </tr>
            
            <tr>
                <td><label for="LastNameLabel" class="tableproperties">Last Name</label></td>
                <td><input type="text" name="lastname" placeholder="Enter Last Name" id="LastNameBox" style="height: 30px; border:2px solid black; width: 300px;" required></td>
            </tr>
            
            <tr>
                <td><label for="eMailLabel" class="tableproperties">Email</label></td>
                <td><input type="email" name="email" placeholder="Enter Email" id="eMailBox" style="height: 30px; border:2px solid black; width: 300px;" required></td>
            </tr>
            
            <tr>
                <td><label for="passwordLabel" class="tableproperties">Password</label></td>
                <td><input type="password" name="password" placeholder="Enter Password" id="passwordTextbox" maxlength="24" style="height: 30px; border:2px solid black; width: 300px;" required></td>
                <td><i class="fa fa-info-circle infoIcon" title="Password must contain minimum 3 upper case, 2 lower case and 2 special chars"></i></td>
                <td><progress value="0" max="100" class="progressBar" id="progressStatus"></progress></td>
                <td id="passwordStrength"></td>
            </tr>
            
            <tr>
                <td><label for="confirmPasswordLabel" class="tableproperties">Confirm Password</label></td>
                <td><input type="password" name="password" placeholder="Must be same as password" maxlength="24" id="confirmPasswordBox" style="height: 30px; border:2px solid black; width: 300px;" required></td>
                <td id="passwordMismatch"></td>
            </tr>
            
            <tr>
                <td><label for="dobLabel" class="tableproperties">D.O.B</label></td>
                <td><input type="date" name="password" placeholder="Enter D.O.B" id="dobBox" style="height: 30px; border:2px solid black; width: 300px;" required></td>
            </tr>
            
            <tr>
                <td><label for="dobTimeLabel" class="tableproperties">D.O.B with time</label></td>
                <td><input type="datetime" name="password" placeholder="Enter D.O.B with time" id="dobTimeBox" style="height: 30px; border:2px solid black; width: 300px;" required></td>
            </tr>
            
            <tr>
                <td><label for="localDOBLabel" class="tableproperties">Local D.O.B</label></td>
                <td><input type="datetime-local" name="password" placeholder="Enter Local D.O.B" id="localDobBox" style="height: 30px; border:2px solid black; width: 300px;" required></td>
            </tr>
            
            <tr>
                <td><label for="ssnLabel" class="tableproperties">SSN</label></td>
                <td><input type="text" name="password" placeholder="000-00-0000" id="ssnBox" pattern="^(\d{3}-\d{2}-\d{4})$" style="height: 30px; border:2px solid black; width: 300px;" required></td>
            </tr>

            <tr>
                <td><label for="usPhoneNumber" class="tableproperties" >US Phone Number</label></td>
                <td><input type="text" name="phone" pattern=”^([A-Z]{2}\d{4}[A-Z]{3})$” placeholder="000-000-0000" id="usNumberBox" style="height: 30px; border:2px solid black; width: 300px;" required></td>
            </tr>
            
            <tr>
                <td><label for="creditLabel" class="tableproperties" id="CreditText">Credit Card Number</label></td>
                <td><input type="text" name="creditCardNumber" placeholder="Enter Credit Card Number" pattern="^[0-9]{12}(?:[0-9]{4})?$" id="creditBox" style="height: 30px; border:2px solid black; width: 300px;" required></td>
            </tr>
            
            <tr>
                <td colspan='2'><button type="button" onclick=" return checkForm()" class="btn btn-primary btn-lg btn-block" style="width:520px; height: 50px;" id="createACC">Create Account</button><button type="button" class="btn btn-danger btn-lg btn-block" style="width:520px; height: 50px;" onclick="location.href = 'index.html';">Cancel</button></td>
            </tr>
        </table>
    </form>
    </body>
        <script src="js/jquery.min.js"></script>
        <script src="css/bootstrap/js/bootstrap.min.js"></script>
        <script src="js/modernizr.js"></script>
        <script>
            var checkpass = 0;
        $('#passwordTextbox').keyup(function() {
            var cs2 = $(this).val();
            var numUpper = cs2.length - cs2.replace(/[A-Z]/g, '').length;
            $('#upperlabel').text(numUpper);
            var cs3 = $(this).val();
            var numLower = cs3.length - cs3.replace(/[a-z]/g, '').length;
            $('#lowerlabel').text(numLower);
            var cs4 = $(this).val();
            var numSpecial = cs4.length - cs4.replace(/[~`!#$%\^&*+=\-\[\]\\@';,/{}()_.|\\":<>\?]/g, '').length;
            $('#speciallabel').text(numSpecial);
            
            if((numUpper>=3) && (numLower>=2)){
                if(numSpecial==2){
                    document.getElementById('progressStatus').value=50;
                    document.getElementById('passwordStrength').innerHTML="Normal";
                }
                if(numSpecial==3 || numSpecial==4 || numSpecial==5){
                    document.getElementById('progressStatus').value=75;
                    document.getElementById('passwordStrength').innerHTML="Medium";
                }
                if(numSpecial >5){
                    document.getElementById('progressStatus').value=100;
                    document.getElementById('passwordStrength').innerHTML="Strong";
                }
            }
            
            else if((numUpper==0) && (numLower==0) && (numSpecial ==0)){
                document.getElementById('progressStatus').value=0;
                document.getElementById('passwordStrength').innerHTML="";
            }
            
            else{
                document.getElementById('progressStatus').value=25;
                document.getElementById('passwordStrength').innerHTML="Weak";
            }
            
        });
        </script>
    
    <script type="text/javascript">
        var flag = 0;
        
//        function beforeCheckForm(){
//            checkForm();
//            afterForm();
//        }
        
        function checkForm(){
            var firstName = document.getElementById("FirstNameBox").value;
            var lastName = document.getElementById("LastNameBox").value;
            var emailId = document.getElementById("eMailBox").value;
            var passwordFirst = document.getElementById("passwordTextbox").value;
            var confirmPassword = document.getElementById("confirmPasswordBox").value;
            var dob = document.getElementById("dobBox").value;
            var dobtime = document.getElementById("dobTimeBox").value;
            var localDob = document.getElementById("localDobBox").value;
            var ssn = document.getElementById("ssnBox").value;
            var usNumber = document.getElementById("usNumberBox").value;
            var creditCardNumber = document.getElementById("creditBox").value;
            
            var cs2 = document.getElementById("passwordTextbox").value;
            var numUpper = cs2.length - cs2.replace(/[A-Z]/g, '').length;
            $('#upperlabel').text(numUpper);
            var cs3 = document.getElementById("passwordTextbox").value;
            var numLower = cs3.length - cs3.replace(/[a-z]/g, '').length;
            $('#lowerlabel').text(numLower);
            var cs4 = document.getElementById("passwordTextbox").value;
            var numSpecial = cs4.length - cs4.replace(/[~`!#$%\^&*+=\-\[\]\\@';,/{}()_.|\\":<>\?]/g, '').length;
            $('#speciallabel').text(numSpecial);
        
            if(passwordFirst != confirmPassword)
            {
              document.getElementById("passwordMismatch").innerHTML="Password Mismatch";
              flag = 1;
              return false;
            }
            
            else{		  
              document.getElementById("passwordMismatch").innerHTML="";
                
                if(numUpper<=3 || numLower<=2 || numSpecial<=2){
                    alert("Minimum password requirement not acheived");
                    flag = 1;
                    return false;
                }
            }
            
            //Storing in local storage
            if(typeof(Storage)!=="undefined"){
                localStorage.setItem("localfname", firstName);
                localStorage.setItem("locallname", lastName);
                localStorage.setItem("localemail", emailId);
                localStorage.setItem("localpassword", passwordFirst);
                localStorage.setItem("localdob", dob);
                localStorage.setItem("localdobtime", dobtime);
                localStorage.setItem("locallocalDob", localDob);
                localStorage.setItem("localssn", ssn);
                localStorage.setItem("localusnumber", usNumber);
                localStorage.setItem("localcreditCardNumber", creditCardNumber);
            }

            //Using Modernizer
            if (Modernizr.localstorage) {
                alert('localStorage is available!! Directing to Login Page');
            }
            else {
              alert('This Browser Doesn\'t Support Local Storage.');
            }
            flag = 0;
            if(flag ==0){
                window.location.href='signin.html';
            }
            return true;
        }
        
        function afterForm(){
            if(flag ==0){
                window.location.href='signin.html';
            }
        }
    </script>
    
</html>